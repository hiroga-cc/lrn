# 処理フロー

処理フローを考えるときに、
アクター間の順序とデータ構造を一緒に考えてはいけない。


## 具体例
画面からマスターをメンテナンスするWebシステムで、ユーザーがテーブルの中身を書き換えてからサーバーにSubmitする。サーバーはデータの中身をチェックし、DBを更新する。  
* この処理が全て更新するか更新しないかの場合（普通はそう）、サーバー内でもデータを全てチェック→全て更新、とすべき。  
* または、ユーザーがマスターを1行編集するごとに更新するようにすべき。

以下のようなコードを書くべきではない。
```
for record in res["results"]:
  if check_something(record):
    updete_master(record)

conn.commit(): # 何も問題がなかったら
```

このように書くべき
```
# 全てチェック
for record in res["results"]:
  if !check_something(record):
    return

# 全て更新
for record in res["results"]:
  updete_master(record)
```
